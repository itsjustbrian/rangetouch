!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("RangeTouch",t):e.RangeTouch=t()}(this,(function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t={addCSS:!0,thumbWidth:15,watch:!0};function n(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var r=function(e){return null!=e?e.constructor:null},u=function(e,t){return!!(e&&t&&e instanceof t)},i=function(e){return null==e},o=function(e){return r(e)===Object},a=function(e){return r(e)===String},c=function(e){return Array.isArray(e)},l=function(e){return u(e,NodeList)},s=a,f=c,h=l,d=function(e){return u(e,Element)},m=function(e){return u(e,Event)},v=function(e){return i(e)||(a(e)||c(e)||l(e))&&!e.length||o(e)&&!Object.keys(e).length};function g(e,t){if(1>t){var n=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}return function(){function r(e,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),d(e)?this.element=e:s(e)&&(this.element=document.querySelector(e)),d(this.element)&&v(this.element.rangeTouch)&&(this.config=Object.assign({},t,n),this.init())}return u=r,o=[{key:"setup",value:function(e){var u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=null;if(v(e)||s(e)?i=Array.from(document.querySelectorAll(s(e)?e:'input[type="range"]')):d(e)?i=[e]:h(e)?i=Array.from(e):f(e)&&(i=e.filter(d)),v(i))return null;var o=Object.assign({},t,u);if(s(e)&&o.watch){var a=new MutationObserver((function(t){Array.from(t).forEach((function(t){Array.from(t.addedNodes).forEach((function(t){d(t)&&n(t,e)&&new r(t,o)}))}))}));a.observe(document.body,{childList:!0,subtree:!0})}return i.map((function(e){return new r(e,u)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}],(i=[{key:"init",value:function(){r.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){r.enabled&&(this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[n](e,(function(e){return t.set(e)}),{userCapture:!1,passive:!0})}))}},{key:"get",value:function(e){if(!r.enabled||!m(e))return null;var t,n=e.target,u=e.changedTouches[0],i=parseFloat(n.getAttribute("min"))||0,o=parseFloat(n.getAttribute("max"))||100,a=parseFloat(n.getAttribute("step"))||1,c=n.getBoundingClientRect(),l=100/c.width*(this.config.thumbWidth/2)/100;return 0>(t=100/c.width*(u.clientX-c.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*l:50<t&&(t+=2*(t-50)*l),i+g(t/100*(o-i),a)}},{key:"set",value:function(e){r.enabled&&m(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}(e.target,"touchend"===e.type?"change":"input"))}}])&&e(u.prototype,i),o&&e(u,o),r;var u,i,o}()}));
//# sourceMappingURL=rangetouch.js.map
